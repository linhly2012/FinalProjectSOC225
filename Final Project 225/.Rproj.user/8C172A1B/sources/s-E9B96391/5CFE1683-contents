---
title: "SOC 225 LAB Homework 3"
author: "Linh Ly"
output:
  html_document:
    df_print: paged
---
Write all code in the chunks provided!

Remember to unzip to a real directory before running everything!

Question one should be roughly analogous to what we've done in class. There are hints at the bottom of this document if you get stuck. If you still can't figure it out, go to google/stack exchange/ask a friend. Finally, email me or come to office hours :).

## Problem 1: Preparing Data

1.1 Set up your environment by: 
-A. Loading the tidyverse  
-B. Reading the Airbnb Data: There's another new dataset. This one has almost 10,000 cases and the census data by zipcode
```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)
airbnb <- read.csv("data/airbnb_census.csv")
airbnb
```
I've given you absolute populations and proportions for the racial composition of the zipcode for each listing. I've also made a variable called 'modal_race' which is the race with the largest proportion in that neighborhood. 

1.2 Use a scatter plot to compare how unit prices change with the proportion of a particular race.
Bonus: group by zipcode for this plot
```{r}
sub_df <- airbnb %>% select(black_proportion, zipcode, 
                            clean_price) %>% group_by(zipcode) %>% mutate(mean_price= mean(clean_price))

ggplot(sub_df) + geom_point(aes(black_proportion, mean_price, colour = zipcode)) 
```
  
1.3 Use the modal_race variable to plot a box plot comparing race and price.
Bonus: show how the comparison differs by neighborhood group.
```{r}
ggplot(airbnb) + 
  geom_boxplot(aes(modal_race, clean_price, colour = neighbourhood_group_cleansed))
```

1.4 Interpret your answer to 1.3. Check the hints if you need help.
  *Your answer should be at least a few sentences here*
This plot from 1.3 show that there are the white population in Manhattan is heavily skewed with many outliers and high median value compare to the other neighborhood like Brox. It also show that the asian popuation in Staten Island and Bronx were absent on the chart. The interpretation for this is varies, but one interpretation I can take for this chart is that from Staten Island and Bronx neighborhood, Asian population is not involve with the Airbnb economic practice. 

## Problem 2: Plan Your Plots
*You'll need to have a few plots in your poster. It helps to think about what you want to present and how you'll prepare and present that using your data. You'll plan 3 plots below (they don't all have to be in your final poster). For each, provide:*
  
a. The purpose of the plot: what do you want people to understand when they see this?  
b. The type of plot: what geom functions will you use to present the plot? Why are those the best choices?  
c. Limitations/biases: What is missing from this presentation? Could someone get the wrong idea? What can you do to help limit the negative possibilities here?  

Plot idea 1: Scatter plot
a. The purpose of the plot is to show the relationship between unemployment rate among the population, 
and homelessness among the population, and how unemployment has an affect on homelessness with the 
population of each state. 
b. geom_point, because it will be easy to see where each state is on the plot, by color the label as
state.
c. Popele can get the wrong idea the various way like they don't see the relationship or how is it affected negative or positively, but I believe a way I can make it easier to understand is potentially perform linear regression. 

Plot idea 2: Line plot
a. The purpose this plot is to see if the state has high unemployment rate, does it also influence the measure of homelessness of that state. Also, a way to identify outliers. 
b. geom_line, because this plot respectively to each other values by the way it structure in the data frame. 
c. Some people might this is just a normal graph and nothing special. A way to limit this negative possiblities find a way to graph not only 2016 data but also maybe 2015 include to show the comparison. 

Plot idea 3: Histogram/ Bar   
a. The purpose this plot to see which state has the highest of average unemployment rate.
b. geom_bar, because this plot will graph display the data in an easy way to see the unemployment rate measure of 
each state (especially max and min) . 
c. I believe someone could get the wrong idea from this, they might not see the point, since there is only one data is on the graph. To eliminate this limitation, I am planning to put this next to the line plot and add a small explanation on the side. 
  
## Problem 3: Make the Plots  
Using your plans from problem 3, produce the plots in r. Use as many codeblocks as you need. Make sure to include proper titles and labels. Think about reducing chart junk and improving your data/ink ratio.

```{r}
data <- read.csv("data_project/data.csv") %>% arrange(state)
data 
```

Plot 1: Scatter plot
```{r} 
#s_df - data frame for plot idea
s_df <- data %>% select(Year, state, avg_homeless_07to16, Sum_Total_Homeless, Sum_Unemploy_Rate, Estimate) %>% 
  mutate(homeless_proportion = Sum_Total_Homeless / Estimate, 
         unemploy_proportion = Sum_Unemploy_Rate / Estimate)

ggplot(s_df %>% filter(Year == 2016)) +
  geom_point(aes(Sum_Unemploy_Rate, Sum_Total_Homeless, colour = state)) + 
  labs(title = "Relationship of Unemployment and Homelessness 2016") + 
  xlab("Unemployment Proportion to Population") +
  ylab("Homeless Proportion to Population") +
  theme(axis.title.y = element_text(margin = margin(r = 20)), 
        axis.title.x = element_text(margin = margin(t = 10)))
```

Plot 2: Line plot 
```{r}
ggplot(s_df %>% filter(Year == 2016)) + 
  geom_line(aes(x= Sum_Unemploy_Rate, y = Sum_Total_Homeless)) + 
  labs(title = "Unemployment and Total Homelessness of US in 2016") + 
  xlab("Sum of Unemployment Rate") +
  ylab("Sum of Total Homeless") 
```

Plot 3: Histogram
```{r}
hist_df <- data %>% select(state, avg_homeless_07to16, avg_unemploy_07to16) 
hist_df <- hist_df[!duplicated(hist_df$state), ]

ggplot(hist_df, aes(state, avg_unemploy_07to16)) + 
  geom_bar(stat = "identity") + 
  labs(title = "Average Unemployment Rate from 2007 to 2016 in the US") + 
  xlab("State") +
  ylab("Average Unemployment Rate") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```
##Hints

1.4
Check out these resources if you're not sure about interpreting box plots:

https://magoosh.com/statistics/reading-interpreting-box-plots/
https://www.youtube.com/watch?v=oBREri10ZHk 

